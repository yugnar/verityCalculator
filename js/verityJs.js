let is3Dduplicate=!1;function validFirstInput(e){let t=e;if(2!==(t=t.map(e=>e.trim().slice(0,1))).length&&3!==t.length)throw Error("Invalid input length");if(2===t.length){for(let s of["c","s","t"])if(!t.includes(s)){t.push(s);break}}if(!(t.includes("t")&&t.includes("c")&&t.includes("s")))throw Error("Invalid symbols");return t}function validSecondInput(e){let t=["sp","cy","co","cu","pr","py"],s=e;for(let l of s=s.map(e=>e.trim().slice(0,2)))if(!t.includes(l))throw Error("Invalid symbol");return s}function swap(e,t,s,l,c){if(!e[t].includes(l)||!e[s].includes(c)||l===c||t===s)throw Error("Invalid swap parameters");return e[t]=e[t].filter((e,t,s)=>e!==l||t!==s.indexOf(l)),e[t].push(c),e[s]=e[s].filter((e,t,s)=>e!==c||t!==s.indexOf(c)),e[s].push(l),e}function generateSuccessors(e){let t=[],s=[],l=[["c","t"],["c","s"],["t","c"],["s","c"],["s","t"],["t","s"]],c=["<b>LEFT</b>","<b>MID</b>","<b>RIGHT</b>"],i={s:"<b>SQUARE</b>",c:"<b>CIRCLE</b>",t:"<b>TRIANGLE</b>"};for(let[d,r]of[[0,1],[0,2],[1,2]])for(let[n,a]of l)try{let o=swap(JSON.parse(JSON.stringify(e)),d,r,n,a),u=`Excise ${i[n]} from ${c[d]}, Excise ${i[a]} from ${c[r]}`;t.push(o),s.push(u)}catch(f){continue}return[t,s]}function nodeSuccess(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++){let l=new Set(e[s]),c=new Set(t[s]);if(!areSetsEqual(l,c))return!1}return!0}function areSetsEqual(e,t){if(e.size!==t.size)return!1;for(let s of e)if(!t.has(s))return!1;return!0}function generateSwaps(e,t){let[s,l]=function e(t,s){let l=[[t,[]]],c=new Set;for(;l.length>0;){let[i,d]=l.shift();if(nodeSuccess(i,s))return[i,d];let r=JSON.stringify(i.map(e=>e.join("")));if(c.has(r))continue;c.add(r);let[n,a]=generateSuccessors(i);n.forEach((e,t)=>{l.push([e,d.concat([a[t]])])})}return[null,[]]}(e,t);return console.log("RESULT NODE IS:",s),console.log("RESULT INSTRUCTIONS ARE:",l),l}function createOrder(e,t){let s=t.map(e=>{switch(e){case"sp":return["c","c"];case"cy":return["c","s"];case"co":return["c","t"];case"cu":return["s","s"];case"pr":return["s","t"];case"py":return["t","t"];default:throw Error("Invalid symbol")}});if(2===s.length){let l={c:0,s:0,t:0};s.forEach(e=>{let t=Array.isArray(e)?e.join(""):e;["c","s","t"].forEach(e=>{l[e]+=(t.match(RegExp(e,"g"))||[]).length})});let c=[];Object.keys(l).forEach(e=>{for(let t=0;t<2-l[e];t++)c.push(e)}),s.push(c)}let i=e.map(e=>{switch(e){case"c":return["s","t"];case"s":return["c","t"];case"t":return["c","s"];default:throw Error("Invalid shape")}}),d=generateSwaps(s,i);console.log("SWAPS ARE:",d),formatResult(d),d.forEach((e,t)=>{console.log(`${t}. ${e}`)})}function calculateResult(){let e=document.querySelector(".selected-first")?.id,t=document.querySelector(".selected-second")?.id;is3Dduplicate?(selectedFirst3dId=document.querySelector(".selected-first-3d-special")?.id,selectedSecond3dId=document.querySelector(".selected-first-3d-special")?.id):(selectedFirst3dId=document.querySelector(".selected-first-3d")?.id,selectedSecond3dId=document.querySelector(".selected-second-3d")?.id);let s={circleShape:"c",triangleShape:"t",squareShape:"s",sphereShape:"sp",pyramidShape:"py",cubeShape:"cu",coneShape:"co",cylinderShape:"cy",prismShape:"pr"};var l=[s[e],s[t]];l=validFirstInput(l),console.log("INSIDE SHAPES ARE:",l);var c=[s[selectedFirst3dId],s[selectedSecond3dId]];c=validSecondInput(c),console.log("OUTSIDE SHAPES ARE:",c),console.log("SWAPS ARE:"),createOrder(l,c),console.log("====================")}function extractShapeAndPosition(e){let t=["CIRCLE","SQUARE","TRIANGLE"].find(t=>e.includes(t))||"UNKNOWN",s=["LEFT","MID","RIGHT"].find(t=>e.includes(t))||"UNKNOWN";return console.log("SHAPE:",t,"POSITION:",s),[t,s]}function formatResult(e){let t="";t=0===e.length?'<h2 class="text-center text-danger"><b>ALREADY SOLVED</b> <br><i>or</i><br> invalid initial conditions.</h2>':e.map((e,t)=>`<p>${t+1}. ${e} <div class="button-container d-flex justify-content-around footer-context"> <button class="btn square-btn" id="dynamicLEFT${t}"></button> <button class="btn square-btn" id="dynamicMID${t}"></button> <button class="btn square-btn" id="dynamicRIGHT${t}"></button> </div></p>`).join(""),document.getElementById("swapsOutput").innerHTML=`<h2 class="text-center">Solution:</h2><div class="outputFormat">${t}</div>`,e.forEach((e,t)=>{let s=e.split(", "),[l,c]=extractShapeAndPosition(s[0]),[i,d]=extractShapeAndPosition(s[1]);console.log("SHAPE 1:",l,"POSITION 1:",c),console.log("SHAPE 2:",i,"POSITION 2:",d);let r=`dynamic${c.toUpperCase()}${t}`,n=document.getElementById(r);if(n)switch(l){case"CIRCLE":n.classList.add("circleShapeRepeat");break;case"SQUARE":n.classList.add("squareShapeRepeat");break;case"TRIANGLE":n.classList.add("triangleShapeRepeat")}if(r=`dynamic${d.toUpperCase()}${t}`,n=document.getElementById(r))switch(i){case"CIRCLE":n.classList.add("circleShapeRepeat");break;case"SQUARE":n.classList.add("squareShapeRepeat");break;case"TRIANGLE":n.classList.add("triangleShapeRepeat")}})}document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll(".square-btn");e.forEach(e=>{e.addEventListener("click",function(){let e=document.querySelectorAll(".selected-first, .selected-second"),t=document.querySelectorAll(".selected-first"),s=document.querySelectorAll(".selected-second");e.length<2?this.classList.contains("selected-first")||this.classList.contains("selected-second")?(this.classList.remove("selected-first"),this.classList.remove("selected-second")):0===t.length?this.classList.add("selected-first"):0===s.length&&this.classList.add("selected-second"):(this.classList.contains("selected-first")||this.classList.contains("selected-second"))&&(this.classList.remove("selected-first"),this.classList.remove("selected-second"));let l=document.querySelectorAll(".selected-first, .selected-second, .selected-first-3d, .selected-second-3d, .selected-first-3d-special").length;4===l||3===l&&is3Dduplicate?calculateResult():document.getElementById("swapsOutput").innerHTML=""})});let t=document.querySelectorAll(".square-btn-3d");t.forEach(e=>{e.addEventListener("click",function(){let e=document.querySelectorAll(".selected-first-3d, .selected-second-3d, .selected-first-3d-special"),t=document.querySelectorAll(".selected-first-3d",".selected-first-3d-special"),s=document.querySelectorAll(".selected-second-3d");if(is3Dduplicate){if(console.log(e.length),e.length<1)this.classList.contains("selected-first-3d-special")||this.classList.add("selected-first-3d-special");else{let l=document.querySelectorAll(".selected-first-3d-special");l.forEach(e=>{e.classList.remove("selected-first-3d-special")}),this.classList.contains("selected-first-3d-special")||this.classList.add("selected-first-3d-special"),console.log(this)}}else e.length<2?this.classList.contains("selected-first-3d")||this.classList.contains("selected-second-3d")?(this.classList.remove("selected-first-3d"),this.classList.remove("selected-second-3d")):0===t.length?this.classList.add("selected-first-3d"):0===s.length&&this.classList.add("selected-second-3d"):(this.classList.contains("selected-first-3d")||this.classList.contains("selected-second-3d"))&&(this.classList.remove("selected-first-3d"),this.classList.remove("selected-second-3d"));let c=document.querySelectorAll(".selected-first, .selected-second, .selected-first-3d, .selected-second-3d, .selected-first-3d-special").length;4===c||3===c&&is3Dduplicate?calculateResult():document.getElementById("swapsOutput").innerHTML=""})});let s=document.getElementById("toggleButton");s.addEventListener("change",function(){let e=document.querySelectorAll(".selected-first-3d"),t=document.querySelectorAll(".selected-second-3d"),s=document.querySelectorAll(".selected-first-3d-special");t.forEach(e=>{e.classList.remove("selected-second-3d")}),document.getElementById("swapsOutput").innerHTML="";let l=document.querySelectorAll(".selected-first, .selected-second, .selected-first-3d, .selected-second-3d, .selected-first-3d-special").length;this.checked?(console.log("Toggle button is on"),is3Dduplicate=!0,e.forEach(e=>{e.classList.remove("selected-first-3d"),e.classList.add("selected-first-3d-special")}),3===l&&calculateResult()):(console.log("Toggle button is off"),is3Dduplicate=!1,s.forEach(e=>{e.classList.remove("selected-first-3d-special"),e.classList.add("selected-first-3d")}))})}),document.getElementById("refreshIcon2d").addEventListener("click",function(){let e=document.querySelectorAll(".selected-first, .selected-second");e.forEach(e=>{e.classList.remove("selected-first"),e.classList.remove("selected-second")}),document.getElementById("swapsOutput").innerHTML=""}),document.getElementById("refreshIcon3d").addEventListener("click",function(){let e=document.querySelectorAll(".selected-first-3d, .selected-second-3d, .selected-first-3d-special");e.forEach(e=>{e.classList.remove("selected-first-3d"),e.classList.remove("selected-second-3d"),e.classList.remove("selected-first-3d-special")}),document.getElementById("swapsOutput").innerHTML=""}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip()});